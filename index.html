<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Document</title>
  <link type="text/css" rel="stylesheet" href="./assets/css/index.css"/>
</head>

<body>
<div id="container" style="background: #fff0f6"></div>
<audio id="music" loop src="./assets/media/heartBeat.mp3"></audio>
<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
  <button id="button" class="play"></button>
</div>

<script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.9.0/vconsole.min.js"></script>
<script src="./assets/js/konva.min.js"></script>
<script src="./assets/js/utils.js"></script>
<script src="./assets/js/scene.js"></script>
<script>
  new VConsole();

  Konva.pixelRatio = 1
  const button = document.querySelector('#button')
  const music = document.querySelector('#music')
  button.onclick = function() {
    button.classList.add('active')
  }
  let stage
  button.addEventListener('transitionend', function() {
    if (stage) return
    button.parentNode?.removeChild(button)
    stage = new Scene('#container', {
      width: window.innerWidth,
      height: window.innerHeight,
      music: music
    })
    stage.animation()
  }, false)
</script>
</body>

</html>